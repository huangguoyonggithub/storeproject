<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="zxx">
<!--<![endif]-->
<!-- Begin Head -->

<head>
    <title>CSGO装备商城</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">
    <meta name="MobileOptimized" content="320">
    <!--导入核心文件-->
    <script src="../bootstrap3/js/holder.js"></script>
    <link href="../bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
    <script src="../bootstrap3/jquery-1.9.1.min.js"></script>
    <!--Start Style -->
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../css/icofont.min.css">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <link rel="stylesheet" type="text/css" href="../css/orderInfo.css">
	<link rel="stylesheet" id="theme-change" type="text/css" href="">
    <!--  icon  -->
    <link rel="stylesheet" type="text/css" href="../css/icon.css">
    <style type="text/css">
        #checkbox-all{
            position: relative;
            top: 15px;
            left: 10px;
        }
        /*#btn-payment-form{*/
        /*    position: relative;*/
        /*    left: 10%;*/
        /*}*/
    </style>
</head>


<body>
	<div class="loader">
	  <div class="spinner">
		<img src="../picture/loader.gif" alt="">
	  </div>
	</div>
    <!-- Main Body -->
    <div class="page-wrapper">
        <!-- Header Start -->
        <header class="header-wrapper main-header" id="header">
            <!--      header内容      -->
        </header>
        <!-- Sidebar Start -->
        <aside class="sidebar-wrapper" id="sidebar">

        </aside>
        <!-- Container Start -->
        <div class="page-wrapper">
            <div class="main-content">
                <!-- Page Title Start -->
                <div class="row">
                    <div class="colxl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                        <div class="page-title-wrapper">
                            <div class="page-title-box">
                                <h4 class="page-title bold">OrderInfo</h4>
                            </div>
                            <div class="breadcrumb-list">
                                <ul>
                                    <li class="breadcrumb-link active">OrderInfo</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Table Start -->
                <div class="row">
                    <!-- Styled Table Card-->
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                        <div class="card table-card">
                            <div class="card-header pb-0">
                                <h4>OrderInfo</h4>
                            </div>
                            <div class="card-body pb-4">
                                <div class="col-md-offset-1 col-md-10">
                                    <h1>订单详情：</h1>
                                    <h2 class="page-header">状态信息：</h2>
                                    <div class="state-bar">
                                        当前状态：<span id="">已支付</span>
                                    </div>
                                    <ol class="order-flow">
                                        <li class="order-success">1.提交订单 <small id="order-time">2023-4-2 20:32:17</small> <span class="fa fa-check-circle"></span></li>
                                        <li class="order-success">2.付款成功 <small id="pay-time">2023-4-2 20:35:03</small> <span class="fa fa-check-circle"></span></li>
                                        <li class="order-success">3.付款人 <small id="order-user">admin</small> <span class="fa fa-check-circle"></span></li>
                                    </ol>
                                    <h2 class="page-header">商品详情：</h2>
                                    <div class="panel panel-default">
                                        <div class="panel-body">
                                            <table class="orders-table">
                                                <thead>
                                                    <tr>
                                                        <th width="15%">装备展示</th>
                                                        <th width="35%">装备名称</th>
                                                        <th width="15%">装备价格</th>
                                                        <th width="15%">交易码</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="orders-body" id="orders-item">
                                                <tr>
                                                    <td><img src="../images/portal/12DELLXPS13-silvery/collect.png" class="img-responsive" /></td>
                                                    <td>联想(Lenovo)小新Air13 Pro 13.3英寸14.8mm超轻薄笔记本电脑</td>
                                                    <td>¥<span>5298</span></td>
                                                    <td>¥<span>5298</span></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                            <div>
                                                <h3 class="pull-right">订单总金额：¥<span id="total-price">5298</span></h3>
                                            </div>
                                        </div>
                                    </div>
                                    <a href="paid-goods.html" class="btn btn-success squer-btn mt-2 mr-2">返回</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ad-footer-btm">
                    <p>Copyright &copy; 2023.github.com/huangguoyonggithub.<a target="_blank" href="https://github.com/huangguoyonggithub/" style="color: #00acee">Go to</a></p>
                </div>
			</div>
		</div>
	</div>
    <!-- Script Start -->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/popper.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/custom.js"></script>

    <script type="text/javascript" src="../js/jquery-getUrlParam.js"></script>
    <!--页面详情中使用(或其他product.html?gid=#{gid}方式转递数据)-->
    <!--	可以通过../js/jquery-getUrlParam.js 获取	product.html?gid=#{gid} id的内容（let gid = $.getUrlParam("gid");）-->

    <script type="text/javascript">
        $(document).ready(function () {
            $('#sidebar').load('sidebar.html'); //加载公共html部分
            $('#header').load('header.html'); //加载公共html部分
            showOrderInformation();
        })

        let oid = $.getUrlParam("oid");
        function showOrderInformation() {
            $("#orders-item").empty();
            $.ajax({
                url: "/orders/" + oid + "/order_item_oid",
                type: "GET",
                dataType: "JSON",
                success: function(json) {
                    if (json.state == 200){
                        let list = json.data;
                        for (let i = 0; i < list.length; i++) {
                            let tr = '<tr>'
                                + '<td><img src="#{image}" class="img-responsive" /></td>'
                                + '<td>#{title}</td>'
                                + '<td>¥<span>#{price}</span></td>'
                                + '<td><span>#{status}</span></td>'
                                + '</tr>';

                            tr = tr.replace(/#{image}/g, list[i].image);
                            tr = tr.replace(/#{title}/g, list[i].title);
                            tr = tr.replace(/#{price}/g, list[i].price);
                            tr = tr.replace(/#{status}/g, list[i].status);

                            $("#orders-item").append(tr);
                        }
                    }
                },
                error : function (xhr) {
                    alert("购物车列表数据加载产生未知异常，" + xhr.status);
                }
            });

            $.ajax({
                url: "/orders/" + oid + "/order",
                type: "GET",
                dataType: "JSON",
                success: function(json) {
                    if (json.state == 200){
                        $("#total-price").html(json.data.totalPrice)
                        $("#order-user").html(json.data.createdUser)
                    }
                },
                error : function (xhr) {
                    alert("购物车列表数据加载产生未知异常，" + xhr.status);
                }
            });
        }
    </script>
</body>

</html>